plugins {
    id "com.jfrog.artifactory"
    id "biz.aQute.bnd.builder"
}

apply plugin: "java"
apply plugin: "maven-publish"
apply plugin: "com.jfrog.artifactory"
apply plugin: "signing"

sourceCompatibility = JavaVersion.VERSION_11
targetCompatibility = JavaVersion.VERSION_11

def slf4jVersion = "1.7.25"

apply plugin: "groovy"

jar {
    from "LICENSE"
    manifest {
        attributes("Automatic-Module-Name": "nadel")
    }
}

dependencies {
    implementation project(path: ":nadel-api", configuration: "default")
    implementation "org.slf4j:slf4j-api:" + slf4jVersion
    testImplementation "junit:junit:4.11"
    testImplementation "org.spockframework:spock-core:2.0-groovy-3.0"
    testImplementation "org.codehaus.groovy:groovy:3.0.8"
    testImplementation "org.codehaus.groovy:groovy-json:3.0.8"
    testImplementation "cglib:cglib-nodep:3.1"
    testImplementation "org.objenesis:objenesis:2.1"
    testImplementation "org.slf4j:slf4j-simple:" + slf4jVersion
    testImplementation "com.fasterxml.jackson.core:jackson-databind:2.9.6"
    testImplementation "org.openjdk.jmh:jmh-core:1.25"
    testAnnotationProcessor "org.openjdk.jmh:jmh-generator-annprocess:1.25"
    testImplementation "com.google.guava:guava:28.0-jre"
    testImplementation project(path: ":nadel-engine-nextgen")
    testImplementation("com.graphql-java:graphql-java-extended-scalars:2021-06-29T01-19-32-8e19827") {
        exclude group : "com.graphql-java", module: "com.graphql-java"
    }

}

test {
    useJUnitPlatform()
}